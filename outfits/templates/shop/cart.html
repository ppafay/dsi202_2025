{% extends "outfits/base.html" %}
{% load static %}

{% block title %}‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ - MindVibe üå∏{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'outfits/cart.css' %}">
{% endblock %}

{% block content %}
<section class="cart-section">
    <div class="container">
        <h2 class="page-title">üõí ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>

        {% if not cart or not cart_items_list %}
            <div class="empty-cart-message">
                <p>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞</p>
                <a href="{% url 'outfits:outfit-list' %}" class="btn btn-primary">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏°‡∏ä‡∏∏‡∏î‡∏™‡∏ß‡∏¢‡πÜ ‡∏ï‡πà‡∏≠‡πÄ‡∏•‡∏¢!</a>
            </div>
        {% else %}
            <div class="cart-layout">
                <main class="cart-items-column">
                    <div class="cart-items-card">
                        {% for item in cart_items_list %}
                        <div class="cart-item">
                            <div class="item-image">
                                <a href="{% url 'outfits:outfit-detail' item.outfit.id %}">
                                {% if item.outfit.image %}
                                    <img src="{{ item.outfit.image.url }}" alt="{{ item.outfit.name }}">
                                {% else %}
                                    <img src="{% static 'outfits/images/placeholder-outfit.png' %}" alt="No image available">
                                {% endif %}
                                </a>
                            </div>
                            <div class="item-details">
                                <h3><a href="{% url 'outfits:outfit-detail' item.outfit.id %}">{{ item.outfit.name }}</a></h3>
                                <p class="item-price-each">‡∏ø{{ item.outfit.price|floatformat:2 }} / ‡∏ä‡∏∏‡∏î</p>
                                <form method="post" action="{% url 'outfits:update_cart' item.id %}" class="update-quantity-form">
                                    {% csrf_token %}
                                    <label for="quantity_cart_{{ item.id }}" class="sr-only">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</label>
                                    <input type="number" name="quantity" id="quantity_cart_{{ item.id }}" value="{{ item.quantity }}" min="1" class="form-control quantity-input-cart">
                                    <button type="submit" class="btn btn-sm btn-outline-primary">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï</button>
                                </form>
                            </div>
                            <div class="item-total-price">
                                <p>‡∏ø{{ item.get_total_item_price|floatformat:2 }}</p>
                            </div>
                            <div class="item-actions">
                               <a href="{% url 'outfits:remove_from_cart' item.id %}" class="remove-link">√ó</a>
                        </div>
                        {% endfor %}
                    </div>
                </main>

                <aside class="cart-summary-column">
                    <div class="summary-card">
                        <h4>‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h4>
                        <dl class="summary-list">
                            <dt>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:</dt>
                            <dd>‡∏ø{{ cart.total_price|default:"0.00"|floatformat:2 }}</dd>
                            {# ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï #}
                            <dt class="summary-total">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥:</dt>
                            <dd class="summary-total-value">‡∏ø{{ cart.total_price|default:"0.00"|floatformat:2 }}</dd>
                        </dl>
                        <a href="{% url 'outfits:payment' %}" class="btn btn-primary btn-lg checkout-button">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</a>
                        <a href="{% url 'outfits:outfit-list' %}" class="continue-shopping-link">‚Üê ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡πà‡∏≠</a>
                    </div>
                </aside>
            </div>
        {% endif %}
    </div>
</section>
{% endblock %}