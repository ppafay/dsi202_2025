{% extends "outfits/base.html" %}
{% load static %}

{% block title %}‡∏ä‡∏∏‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î - MindVibe üå∏{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'outfits/list.css' %}">
<style>
  .search-form {
    max-width: 600px;
    margin: 0 auto var(--space-8);
    display: flex;
    gap: var(--space-3);
  }

  .search-form input {
    flex: 1;
    border-radius: var(--border-radius-pill);
    padding: var(--space-3);
    font-size: 1rem;
  }

  .search-form .btn {
    border-radius: var(--border-radius-pill);
    padding: var(--space-2) var(--space-4);
    white-space: nowrap;
  }

  .outfit-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: var(--space-8);
  }

  .outfit-card {
    background-color: var(--background-card);
    border-radius: var(--border-radius-xl);
    box-shadow: var(--shadow-md);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .outfit-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
  }

  .outfit-card img {
    width: 100%;
    height: auto;
    object-fit: cover;
    border-bottom: 1px solid var(--border-color-divider);
  }

  .card-content {
    padding: var(--space-5);
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .card-content h3 {
    font-size: 1.1rem;
    color: var(--text-primary);
    margin-bottom: var(--space-2);
  }

  .price-tag {
    font-weight: 500;
    color: var(--primary-action-bg);
    margin-bottom: var(--space-4);
  }

  .add_to_cart_form {
    display: flex;
    gap: var(--space-3);
    align-items: center;
  }

  .quantity-selector input {
    max-width: 60px;
    padding: var(--space-2);
    border-radius: var(--border-radius-md);
    text-align: center;
  }

  .btn-primary {
    border-radius: var(--border-radius-pill);
    padding: var(--space-2) var(--space-4);
  }

  .no-outfits-found {
    text-align: center;
    font-size: 1.1rem;
    color: var(--text-light);
    margin-top: var(--space-12);
  }
</style>
{% endblock %}

{% block content %}
<div class="container">
  <h2 class="page-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì</h2>

  <form method="get" action="{% url 'outfits:outfit-search' %}" class="search-form">
    <input type="text" name="q" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏ä‡∏∏‡∏î, ‡∏™‡πÑ‡∏ï‡∏•‡πå, ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏≠‡∏Å‡∏≤‡∏™..." value="{{ request.GET.q }}" class="form-control">
    <button type="submit" class="btn btn-secondary">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
  </form>

  {% if outfits %}
  <div class="outfit-grid">
    {% for outfit in outfits %}
    <div class="outfit-card">
      <a href="{% url 'outfits:outfit-detail' outfit.id %}" class="image-link">
        {% if outfit.image %}
          <img src="{{ outfit.image.url }}" alt="{{ outfit.name }}">
        {% else %}
          <img src="{% static 'outfits/images/placeholder-outfit.png' %}" alt="No image available">
        {% endif %}
      </a>
      <div class="card-content">
        <h3><a href="{% url 'outfits:outfit-detail' outfit.id %}">{{ outfit.name }}</a></h3>
        <p class="price-tag">‡∏ø{{ outfit.price|floatformat:2 }} / ‡∏ß‡∏±‡∏ô</p>

        <form method="post" action="{% url 'outfits:add_to_cart' outfit.id %}" class="add_to_cart_form">
          {% csrf_token %}
          <div class="quantity-selector">
            <label for="quantity_{{ outfit.id }}" class="sr-only">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
            <input type="number" name="quantity" id="quantity_{{ outfit.id }}" value="1" min="1" class="form-control quantity-input">
          </div>
          <button type="submit" class="btn btn-primary">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <p class="no-outfits-found">
    {% if request.GET.q %}
      ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ "{{ request.GET.q }}" ‡∏•‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏≠‡∏∑‡πà‡∏ô‡∏î‡∏π‡∏ô‡∏∞‡∏Ñ‡∏∞
    {% else %}
      ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏∏‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞ ‡∏•‡∏≠‡∏á‡πÅ‡∏ß‡∏∞‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡πá‡∏ß‡πÜ‡∏ô‡∏µ‡πâ‡∏ô‡∏∞‡∏Ñ‡∏∞
    {% endif %}
  </p>
  {% endif %}
</div>
{% endblock %}
